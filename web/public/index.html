<!DOCTYPE html>
<!--[if lt IE 7 ]> <html lang="en" class="ie6" <% if(htmlWebpackPlugin.files.manifest) { %> manifest="<%= htmlWebpackPlugin.files.manifest %>"<% } %>> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="ie7" <% if(htmlWebpackPlugin.files.manifest) { %> manifest="<%= htmlWebpackPlugin.files.manifest %>"<% } %>> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="ie8" <% if(htmlWebpackPlugin.files.manifest) { %> manifest="<%= htmlWebpackPlugin.files.manifest %>"<% } %>> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="ie9" <% if(htmlWebpackPlugin.files.manifest) { %> manifest="<%= htmlWebpackPlugin.files.manifest %>"<% } %>> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en" class="" <% if(htmlWebpackPlugin.files.manifest) { %> manifest="<%= htmlWebpackPlugin.files.manifest %>"<% } %>> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title><%= htmlWebpackPlugin.options.title || 'Relay Fullstack'%></title>

  <% if (htmlWebpackPlugin.options.mobile) { %>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <% } %>

  <% for (var css in htmlWebpackPlugin.files.css) { %>
  <link href="<%= htmlWebpackPlugin.files.css[css] %>" rel="stylesheet">
  <% } %>

  <style>
    html, body {
      padding: 0px;
      margin: 0px;
    }
    html {
      min-height: 100%;
      position: relative;
    }
  </style>

  <!-- The new tab page may be displayed in an iframe, so open
    all links in the top frame. -->
  <base target="_top">
</head>
<body>
<% if (htmlWebpackPlugin.options.unsupportedBrowser) { %>
<style>.unsupported-browser { display: none; }</style>
<div class="unsupported-browser">
  Sorry, your browser is not supported.  Please upgrade to
  the latest version or switch your browser to use this site.
  See <a href="http://outdatedbrowser.com/">outdatedbrowser.com</a>
  for options.
</div>
<% } %>

<% if (htmlWebpackPlugin.options.appMountId) { %>
<div id="<%= htmlWebpackPlugin.options.appMountId%>"></div>
<% } %>

<% if (htmlWebpackPlugin.options.appMountIds && htmlWebpackPlugin.options.appMountIds.length > 0) { %>
<% for (var index in htmlWebpackPlugin.options.appMountIds) { %>
<div id="<%= htmlWebpackPlugin.options.appMountIds[index]%>"></div>
<% } %>
<% } %>

<% if (htmlWebpackPlugin.options.window) { %>
<script>
  /* eslint-disable */
  <% for (var varName in htmlWebpackPlugin.options.window) { %>
    window['<%=varName%>'] = <%= JSON.stringify(htmlWebpackPlugin.options.window[varName]) %>;
  <% } %>
</script>
<% } %>

<!-- Facebook Pixel Code -->
<!-- TODO: Facebook ID as env var -->
<script>
/* eslint-disable */
!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
document,'script','https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '1813501258922708');
</script>
<noscript><img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=1813501258922708&ev=PageView&noscript=1"
/></noscript>
<!-- End Facebook Pixel Code -->

<script>
  // BEGIN: profile and debug ad performance
  if (window.performance && window.performance.now) {
    var adPerfKey = 'htmlLoad'
    var adPerfName = 'HTML load'
    var adPerfLogs = window.adPerfLogs || {}
    var adPerfTime = window.performance.now()
    adPerfLogs[adPerfKey] = {
      time: adPerfTime,
      name: adPerfName
    }
    console.log('Adperf: ' + adPerfName, adPerfTime)
  }
  // END: profile and debug ad performance
</script>

<!-- BEGIN: Amazon TAM apstag bidder -->
<script>
  /* globals apstag */
  /* eslint-disable */
  (function (a9, a, p, s, t, A, g) {
   if (a[a9]) return; function q (c, r) { a[a9]._Q.push([c, r]) }a[a9] = {init: function () { q('i', arguments) }, fetchBids: function () { q('f', arguments) }, setDisplayBids: function () {}, _Q: []}; A = p.createElement(s); A.async = !0; A.src = t; g = p.getElementsByTagName(s)[0]; g.parentNode.insertBefore(A, g)
  })('apstag', window, document, 'script', '//c.amazon-adsystem.com/aax2/apstag.js')
  /* eslint-enable */

  const PREBID_TIMEOUT = 1000

  // BEGIN: profile and debug ad performance
  if (window.performance && window.performance.now) {
    var adPerfKey = 'amazonJsFetch'
    var adPerfName = 'Amazon apstag fetch'
    var adPerfLogs = window.adPerfLogs || {}
    var adPerfTime = window.performance.now()
    adPerfLogs[adPerfKey] = {
      time: adPerfTime,
      name: adPerfName
    }
    console.log('Adperf: ' + adPerfName, adPerfTime)
  }
  // END: profile and debug ad performance

  apstag.init({
    pubID: '3397',
    adServer: 'googletag'
  })
  var googletag = window.googletag || {}
  googletag.cmd = googletag.cmd || []
  apstag.fetchBids(
    {
      slots: [
        {
          slotID: 'div-gpt-ad-1464385742501-0',
          sizes: [[300, 250]]
        },
        {
          slotID: 'div-gpt-ad-1464385677836-0',
          sizes: [[728, 90]]
        }
      ],
      timeout: PREBID_TIMEOUT
    },
    function (bids) {
      // BEGIN: profile and debug ad performance
      if (window.performance && window.performance.now) {
        var adPerfKey = 'amazonBidsReturned'
        var adPerfName = 'Amazon bids returned'
        var adPerfLogs = window.adPerfLogs || {}
        var adPerfTime = window.performance.now()
        adPerfLogs[adPerfKey] = {
          time: adPerfTime,
          name: adPerfName
        }
        console.log('Adperf: ' + adPerfName, adPerfTime)
      }
      // END: profile and debug ad performance

      googletag.cmd.push(function () {
        // Set DFP targeting.
        apstag.setDisplayBids()
      })
    })
</script>
<!-- END: Amazon TAM apstag bidder -->

<!-- BEGIN: Google Tag Manager and ad slot definitions -->
<script type="text/javascript">
  // Google Tag Manager
  var googletag = window.googletag || {}
  googletag.cmd = googletag.cmd || []
  var gads = document.createElement('script')
  gads.async = true
  gads.type = 'text/javascript'
  var useSSL = document.location.protocol === 'https:'
  gads.src = (useSSL ? 'https:' : 'http:') +
    '//www.googletagservices.com/tag/js/gpt.js'
  var head = document.getElementsByTagName('head')[0]
  head.appendChild(gads)

  // Google ad slot definitions
  googletag.cmd.push(function () {
    googletag.defineSlot('/43865596/HBTL', [728, 90], 'div-gpt-ad-1464385677836-0').addService(googletag.pubads())
    googletag.defineSlot('/43865596/HBTR', [300, 250], 'div-gpt-ad-1464385742501-0').addService(googletag.pubads())
    googletag.pubads().enableSingleRequest()
    googletag.enableServices()
  })
</script>
<!-- END: Google Tag Manager and ad slot definitions -->

<% for (var chunk in htmlWebpackPlugin.files.chunks) { %>
<script src="<%= htmlWebpackPlugin.files.chunks[chunk].entry %>"></script>
<% } %>

<% if (htmlWebpackPlugin.options.devServer) { %>
<script src="<%= htmlWebpackPlugin.options.devServer%>/webpack-dev-server.js"></script>
<% } %>

<% if (htmlWebpackPlugin.options.tabAdsEnabled) { %>
<!-- Begin PageFair -->
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script type="text/javascript">
  /* eslint-disable */
  (function() {
    try {
      function async_load(script_url){
        var protocol = ('https:' == document.location.protocol ? 'https://' : 'http://');
        var s = document.createElement('script'); s.src = protocol + script_url;
        var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x);
      }
      bm_website_code = '00B0E101417644EB';
      jQuery(document).ready(function(){async_load('asset.pagefair.com/measure.min.js')});
      jQuery(document).ready(function(){async_load('asset.pagefair.net/ads.min.js')});
    } catch (e) {
      console.error('Error with Pagefair:', e)
    }
  })();
</script>
<!-- End PageFair -->

<% } %>

</body>
</html>
